# 키친포스

## 퀵 스타트

```sh
cd docker
docker compose -p kitchenpos up -d
```

## 요구 사항
### 메뉴 그룹
#### 생성
- 메뉴 그룹을 생성한다.
  - 메뉴의 이름은 비어있을 수 없다.
#### 조회
- 메뉴 그룹을 조회한다.

### 메뉴
#### 생성
- 메뉴를 생성한다.
  - 가격은 0원 이상이어야 한다.
  - 메뉴는 반드시 메뉴 그룹에 속해야 한다.
  - 메뉴에는 하나 이상의 상품이 포함되어야 한다.
  - 메뉴에 포함된 상품의 개수는 0 이상이어야 한다.
  - 메뉴의 가격은 포함된 상품의 가격과 수량을 곱한 값의 합으로 결정된다.
  - 메뉴의 이름에 욕설이 포함될 수 없다.
  - 메뉴의 노출 여부를 설정할 수 있다.

#### 가격 변경
- 메뉴의 가격을 변경한다.
  - 변경된 가격은 포함된 상품의 가격과 수량을 곱한 값의 합을 초과할 수 없다.

#### 노출
- 메뉴를 노출 시킨다.

#### 비노출
- 메뉴를 비노출 시킨다.

#### 메뉴 조회
- 전체 메뉴를 조회한다.

### 상품
#### 생성
- 상품을 생성한다.
  - 상품의 가격은 0원 이상이어야 한다. 
  - 상품의 이름은 비어있을 수 없으며, 욕설을 포함할 수 없다.

#### 가격 변경
- 상품의 가격을 변경한다.
  - 변경된 가격은 0원 이상이어야 하며, 해당 상품을 포함하는 메뉴의 가격이 포함된 상품의 가격 합보다 커지면 안된다.

#### 전체 조회
- 모든 상품을 조회한다.

### 주문 테이블
#### 테이블 생성
- 주문 테이블을 생성한다.

#### 테이블 점유
- 주문 테이블을 점유한다.

#### 테이블 점유 해제
- 주문 테이블의 점유를 해제한다.

#### 게스트 숫자 변경
- 주문 테이블의 게스트 숫자를 변경한다.
  - 주문 테이블의 게스트 숫자는 0 이상이어야 한다.

#### 전체 조회
- 모든 주문 테이블을 조회한다.

#### 주문 테이블 전체 조회
- 주문 테이블 전체를 조회한다.

### 주문
#### 주문 생성
- 주문을 생성한다. 
  - 매장 내 식사가 아니라면, 주문 항목의 요청 개수는 0 이상이어야 한다. 
  - 주문한 메뉴는 노출 상태이어야 한다. 
  - 생성 시 주문의 상태는 대기 중이다. 
  - 배달 주문인 경우 주소가 반드시 있어야 한다. 
  - 매장 내 식사인 경우 테이블이 점유되어 있어야 한다.

#### 주문 수락
- 주문을 수락한다.
  - 주문이 대기중 상태이어야 한다. 
  - 주문 타입이 배달인 경우, 라이더에게 배달을 요청한다. 
  - 주문의 상태를 수락으로 변경한다.

#### 제공 및 배달 요청
- 제공으로 상태를 변경하고, 배달을 요청한다.
  - 주문 상태가 수락이어야 한다. 
  - 주문의 상태를 제공으로 변경한다. 
  - 배달 타입의 주문인 경우, 배달을 시작한다.

#### 배달 시작
- 배달을 시작으로 상태를 변경한다.
  - 주문의 상태가 제공 이어야한다.
  - 배달 타입의 주문이어야 한다.
  - 주문의 상태를 배달중으로 변경한다.

#### 배달 완료
- 배달 완료로 상태를 변경한다.
  - 주문의 상태가 배달중이어야한다.
  - 주문의 상태를 배달 완료로 변경한다.

#### 완료
- 주문 완료로 상태를 변경한다.
  - 주문타입이 배달이라면, 현재 상태가 배달 완료이어야하고, 그렇지 않다면 주문의 상태가 제공이어야 한다.

#### 전체 조회
- 주문 전체를 조회한다.

## 용어 사전

| 한글명    | 영문명             | 설명                                         |
|--------|-----------------|--------------------------------------------|
| 메뉴     | menu            | 주문할 수 있는 최소 단위임. 여러가지 상품들로 구성되며 메뉴 그룹에 속함. |
| 메뉴 그룹  | menu group      | 메뉴의 상위 개념으로 카테고리 역할을 맡음                    |
| 상품     | product         | 메뉴의 하위 개념으로 상품의 가격, 이름 등등을 나타냄             |
| 주문     | order           | 주문의 상태, 주문의 타입 등등을 나타냄                     |
| 주문 아이템 | order line item | 주문의 하위 개념으로, 가격과 개수 등등을 나타냄                |
| 주문 테이블 | order table     | 매장 내 테이블을 나타냄                              |

## 모델링
- 메뉴그룹(MenuGroup)
  - 아이디
  - 이름

- 메뉴(Menu)
  - 아이디
  - 이름
  - 가격
  - 메뉴그룹 아이디
  - 노출 여부
  - 메뉴상품 리스트 (메뉴에 속한 상품들)

- 메뉴상품(MenuProduct)
  - 시퀀스
  - 상품 아이디
  - 수량

- 상품(Product)
  - 아이디
  - 이름
  - 가격

- 주문(Order)
  - 아이디
  - 타입
  - 상태
  - 주문 날짜 및 시간
  - 주문라인아이템 리스트 (주문에 속한 아이템들)
  - 배달 주소
  - 주문테이블 아이디 (주문이 속한 테이블)

- 주문라인아이템(OrderLineItem)
  - 시퀀스
  - 메뉴 아이디 (메뉴에 속함)
  - 수량
  - 가격

- 주문테이블(OrderTable)
  - 아이디
  - 이름
  - 손님 수
  - 점유 여부

### 관계 정의

- 메뉴그룹은 여러 메뉴를 가질 수 있습니다.
- 메뉴는 여러 메뉴상품을 가질 수 있습니다.
- 메뉴상품은 하나의 상품에 속합니다.
- 주문은 여러 주문 아이템을 가질 수 있습니다.
- 주문 아이템은 하나의 메뉴에 속합니다.
- 주문은 하나의 주문테이블에 속합니다.